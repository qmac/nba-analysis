
<!DOCTYPE html>
<html>
  <head>
    <title>Markov Chains</title>
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
    <link href="style.css" type="text/css" rel="stylesheet">
    <script src="http://d3js.org/d3.v3.min.js"></script>
    <script src="vector.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.7/angular.min.js" charset="utf-8"></script>
<style>
.controls {
  position: absolute;
  top: 10px;
  left: 10px;
}
</style>
</head>
<body ng-app="myApp" ng-controller="MainCtrl">
  <st-diagram states="states" transition-matrix="transitionMatrix"
  center="diagramCenter"
  duration="duration"></st-diagram>
  <div class="controls">
    <input class="speedRange" type="range" ng-model="speedRange"
    min="1" max="20" step="1">
    <label> speed </label>
  </div>
</body>
<script>

var myApp = angular.module('myApp', []);

myApp.controller('MainCtrl', function($scope, utils, $window) {
  $scope.states = [
    { label: 'A', index: 0 },
    { label: 'B', index: 1 },
    { label: 'C', index: 2 }
    ];
  
  angular.element($window).on('resize', function() { $scope.$apply(); });

  $scope.diagramCenter = [0.40, 0.5];
  
  $scope.speedRange = 2;
  $scope.$watch('speedRange', function(speed) {
    $scope.duration = 2000 / +speed;
  });

  $scope.transitionMatrix = [
    [0.0, 0.5, 0.5],
    [0.5, 0.0, 0.5],
    [0.8, 0.2, 0.0]
  ];
});
</script>
<script src="common.js" charset="utf-8"></script>
</html>
